function countdown(endDate){let days,hours,minutes,seconds;function calculate(){let startDate=new Date;startDate=startDate.getTime();let timeRemaining=parseInt((endDate-startDate)/1e3);timeRemaining>=0&&(days=parseInt(timeRemaining/86400),timeRemaining%=86400,hours=parseInt(timeRemaining/3600),timeRemaining%=3600,minutes=parseInt(timeRemaining/60),timeRemaining%=60,seconds=parseInt(timeRemaining),document.getElementById("js-days").innerHTML=parseInt(days,10),document.getElementById("js-hours").innerHTML=("0"+hours).slice(-2),document.getElementById("js-minutes").innerHTML=("0"+minutes).slice(-2),document.getElementById("js-seconds").innerHTML=("0"+seconds).slice(-2))}endDate=new Date(endDate).getTime(),isNaN(endDate)||setInterval(calculate,1e3)}!function(){let test;countdown((new Date).getDate()+30*(new Date).getMonth()<168?(new Date).getFullYear()+"-06-17":(new Date).getFullYear()+1+"-06-17")}();const elts={text1:document.getElementById("text1"),text2:document.getElementById("text2")},texts=["Know","About","Me","&","What","I","do..."],morphTime=1,cooldownTime=.25;let textIndex=texts.length-1,time=new Date,morph=0,cooldown=.25;function doMorph(){morph-=cooldown,cooldown=0;let fraction=morph/1;fraction>1&&(cooldown=.25,fraction=1),setMorph(fraction)}function setMorph(fraction){elts.text2.style.filter=`blur(${Math.min(8/fraction-8,100)}px)`,elts.text2.style.opacity=`${100*Math.pow(fraction,.4)}%`,fraction=1-fraction,elts.text1.style.filter=`blur(${Math.min(8/fraction-8,100)}px)`,elts.text1.style.opacity=`${100*Math.pow(fraction,.4)}%`,elts.text1.textContent=texts[textIndex%texts.length],elts.text2.textContent=texts[(textIndex+1)%texts.length]}function doCooldown(){morph=0,elts.text2.style.filter="",elts.text2.style.opacity="100%",elts.text1.style.filter="",elts.text1.style.opacity="0%"}function animate(){requestAnimationFrame(animate);let newTime=new Date,shouldIncrementIndex=cooldown>0,dt=(newTime-time)/1e3;time=newTime,cooldown-=dt,cooldown<=0?(shouldIncrementIndex&&textIndex++,doMorph()):doCooldown()}elts.text1.textContent=texts[textIndex%texts.length],elts.text2.textContent=texts[(textIndex+1)%texts.length],animate();const config={src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/175711/open-peeps-sheet.png",rows:15,cols:7},randomRange=(min,max)=>min+Math.random()*(max-min),randomIndex=array=>0|randomRange(0,array.length),removeFromArray=(array,i)=>array.splice(i,1)[0],removeItemFromArray=(array,item)=>removeFromArray(array,array.indexOf(item)),removeRandomFromArray=array=>removeFromArray(array,randomIndex(array)),getRandomFromArray=array=>array[0|randomIndex(array)],resetPeep=({stage:stage,peep:peep})=>{const direction=Math.random()>.5?1:-1,offsetY=100-250*gsap.parseEase("power2.in")(Math.random()),startY=window.innerHeight-peep.height+offsetY;let startX,endX;return 1===direction?(startX=-peep.height,endX=window.innerHeight+800,peep.scaleX=1):(startX=window.innerHeight+peep.width+800,endX=0,peep.scaleX=-1),peep.x=startX,peep.y=startY,peep.anchorY=startY,{startX:startX,startY:startY,endX:endX}},normalWalk=({peep:peep,props:props})=>{const{startX:startX,startY:startY,endX:endX}=props,xDuration=10,yDuration=.25,tl=gsap.timeline();return tl.timeScale(randomRange(.5,1.5)),tl.to(peep,{duration:10,x:endX,ease:"none"},0),tl.to(peep,{duration:.25,repeat:40,yoyo:!0,y:startY-10},0),tl},walks=[normalWalk];class Peep{constructor({image:image,rect:rect}){this.image=image,this.setRect(rect),this.x=0,this.y=0,this.anchorY=0,this.scaleX=1,this.walk=null}setRect(rect){this.rect=rect,this.width=rect[2],this.height=rect[3],this.drawArgs=[this.image,...rect,0,0,this.width,this.height]}render(ctx){ctx.save(),ctx.translate(this.x,this.y),ctx.scale(this.scaleX,1),ctx.drawImage(...this.drawArgs),ctx.restore()}}const img=document.createElement("img");img.onload=init,img.src=config.src;const canvas=document.querySelector("#crowd-simulator"),ctx=canvas.getContext("2d"),stage={width:window.innerWidth,height:window.innerHeight},allPeeps=[],availablePeeps=[],crowd=[];function init(){createPeeps(),resize(),gsap.ticker.add(render),window.addEventListener("resize",resize)}function createPeeps(){const{rows:rows,cols:cols}=config,{naturalWidth:width,naturalHeight:height}=img,total=rows*cols,rectWidth=width/rows,rectHeight=height/cols;for(let i=0;i<total;i++)allPeeps.push(new Peep({image:img,rect:[i%rows*rectWidth,(i/rows|0)*rectHeight,rectWidth,rectHeight]}))}function resize(){stage.width=canvas.clientWidth,stage.height=canvas.clientHeight,canvas.width=window.innerWidth*devicePixelRatio,canvas.height=window.innerHeight*devicePixelRatio,crowd.forEach(peep=>{peep.walk.kill()}),crowd.length=0,availablePeeps.length=0,availablePeeps.push(...allPeeps),initCrowd()}function initCrowd(){for(;availablePeeps.length;)addPeepToCrowd().walk.progress(Math.random())}function addPeepToCrowd(){const peep=removeRandomFromArray(availablePeeps),walk=getRandomFromArray(walks)({peep:peep,props:resetPeep({peep:peep,stage:stage})}).eventCallback("onComplete",()=>{removePeepFromCrowd(peep),addPeepToCrowd()});return peep.walk=walk,crowd.push(peep),crowd.sort((a,b)=>a.anchorY-b.anchorY),peep}function removePeepFromCrowd(peep){removeItemFromArray(crowd,peep),availablePeeps.push(peep)}function render(){canvas.width=canvas.width,ctx.save(),ctx.scale(devicePixelRatio,devicePixelRatio),crowd.forEach(peep=>{peep.render(ctx)}),ctx.restore()}